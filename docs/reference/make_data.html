<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create simulated datasets. — make_data • misclass</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">misclass</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/misclass.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create simulated datasets.</h1>
    </div>

    
    <p>Create datasets from a hypothetical cohort study. Since correlation structures
are often found in udder health studies, the generated datasets are deemed
to have occurred from the collection of two milk samples collected 1 month
apart from each quarters of a random sample of 30 cows per herd, from 100
dairy herds. The first milk sample (S1) is used to identify quarters at risk of
intramammary infection (IMI) at the beginning of the cohort, while the second
(S2) is used to identify the outcome (acquisition of a new IMI). Three
hypothetical exposures E_q, E_c, E_h (quarter, cow, and herd level) with known
strength of association (OR~3.0) are generated. As it is often the case
(Dufour et al., 2012), exposures are equally associated with odds of a
prevalent IMI on first milk sample as with odds of IMI acquisition on second
sample. Exposures are randomly associated with odds of eliminating an existing
IMI (OR=1.0). If S. aureus or CNS is chosen, default parameters are used.
Otherwise user has to provide his own.</p>
    

    <pre class="usage"><span class='fu'>make_data</span>(<span class='no'>n_herd</span>, <span class='no'>n_cow</span>, <span class='kw'>bact</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"saureus"</span>, <span class='st'>"cns"</span>, <span class='st'>"other"</span>), <span class='kw'>E_hPr</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>E_cPr</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>E_qPr</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>sigma_sqhPr</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>sigma_sqcPr</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>b0_Pr</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>OR_hPr</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>OR_cPr</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>OR_qPr</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>sigma_sqhI</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>sigma_sqcI</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>b0_I</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>OR_hI</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>OR_cI</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>OR_qI</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>sigma_sqhEl</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>sigma_sqcEl</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>b0_El</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>se_parms</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>sp_parms</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>se_series</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>sp_series</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>se_parall</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>sp_parall</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>se_tri</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>sp_tri</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>n_herd</th>
      <td><p>Number of herds.</p></td>
    </tr>
    <tr>
      <th>n_cow</th>
      <td><p>Number of cows per herd.</p></td>
    </tr>
    <tr>
      <th>bact</th>
      <td><p>Type of bacteria: S. aureus, CNS, or other. If other, as to provide parameters.</p></td>
    </tr>
    <tr>
      <th>E_hPr</th>
      <td><p>Exposure distribution (0 to 1) of the binary herd-level (h) predictor. S. aureus and CNS = 0.5.</p></td>
    </tr>
    <tr>
      <th>E_cPr</th>
      <td><p>Exposure distribution (0 to 1) of the binary cow-level (c) predictor. S. aureus and CNS = 0.5.</p></td>
    </tr>
    <tr>
      <th>E_qPr</th>
      <td><p>Exposure distribution (0 to 1) of the binary quarter-level (q) predictor. S. aureus and CNS = 0.5.</p></td>
    </tr>
    <tr>
      <th>sigma_sqhPr</th>
      <td><p>Herd-level variance (sigma_sq) for prevalence of intra-mammary infection (IMI). S. aureus = 0.14; CNS = 0.363.</p></td>
    </tr>
    <tr>
      <th>sigma_sqcPr</th>
      <td><p>Cow-level variance for prevalence of IMI. S. aureus = 2.25; CNS = 0.294.</p></td>
    </tr>
    <tr>
      <th>b0_Pr</th>
      <td><p>Intercept for IMI prevalence; aiming at a prevalence of 2.5%. S. aureus = -6.7; CNS = -2.15.</p></td>
    </tr>
    <tr>
      <th>OR_hPr</th>
      <td><p>OR of association between herd-level variable and IMI prevalence. S. aureus and CNS = 3.</p></td>
    </tr>
    <tr>
      <th>OR_cPr</th>
      <td><p>OR of association between cow-level variable and IMI prevalence. S. aureus and CNS = 3.</p></td>
    </tr>
    <tr>
      <th>OR_qPr</th>
      <td><p>OR of association between observation-level variable and IMI prevalence. S. aureus and CNS = 3.</p></td>
    </tr>
    <tr>
      <th>sigma_sqhI</th>
      <td><p>Herd-level variance for incidence of IMI. S. aureus = 0.838; CNS = 0.27.</p></td>
    </tr>
    <tr>
      <th>sigma_sqcI</th>
      <td><p>Cow-level variance for incidence of IMI. S. aureus = 2.926; CNS = 0.256.</p></td>
    </tr>
    <tr>
      <th>b0_I</th>
      <td><p>Intercept for IMI incidence. S. aureus = -8.3; CNS = -2.4.</p></td>
    </tr>
    <tr>
      <th>OR_hI</th>
      <td><p>OR of association between herd-level variable and IMI incidence. S. aureus and CNS = 3.</p></td>
    </tr>
    <tr>
      <th>OR_cI</th>
      <td><p>OR of association between cow-level variable and IMI incidence. S. aureus and CNS = 3.</p></td>
    </tr>
    <tr>
      <th>OR_qI</th>
      <td><p>OR of association between observation-level variable and IMI incidence. S. aureus and CNS = 3.</p></td>
    </tr>
    <tr>
      <th>sigma_sqhEl</th>
      <td><p>Herd-level variance for elimination of IMI. S. aureus = 0.15; CNS = 0.112.</p></td>
    </tr>
    <tr>
      <th>sigma_sqcEl</th>
      <td><p>Cow-level variance for elimination of IMI. S. aureus = 2.246; CNS = 0.7.</p></td>
    </tr>
    <tr>
      <th>b0_El</th>
      <td><p>Intercept for IMI persistency. S. aureus = -0.6; CNS = 1.6.</p></td>
    </tr>
    <tr>
      <th>se_parms</th>
      <td><p>Vector for mode and x to determine shape parameters of Beta distribution of sensitivity (Se). S. aureus = c(0.90, 0.85); CNS = c(0.60, 0.55).</p></td>
    </tr>
    <tr>
      <th>sp_parms</th>
      <td><p>Vector for mode and x to determine shape parameters of Beta distribution of specificity (Sp). S. aureus = 1; CNS = c(0.95, 0.90).</p></td>
    </tr>
    <tr>
      <th>se_series</th>
      <td><p>Se improvement or loss associated with sampling strategy: duplicate series. S. aureus = -0.1; CNS = -0.25.</p></td>
    </tr>
    <tr>
      <th>sp_series</th>
      <td><p>Sp improvement or loss associated with sampling strategy: duplicate series. S. aureus = 0; CNS = 0.05.</p></td>
    </tr>
    <tr>
      <th>se_parall</th>
      <td><p>Se improvement or loss associated with sampling strategy: duplicate parallel. S. aureus = 0.1; CNS = 0.15.</p></td>
    </tr>
    <tr>
      <th>sp_parall</th>
      <td><p>Sp improvement or loss associated with sampling strategy:duplicate parallel. S. aureus = 0; CNS = -0.05.</p></td>
    </tr>
    <tr>
      <th>se_tri</th>
      <td><p>Se improvement or loss associated with sampling strategy: triplicate (2 out of 3). S. aureus = 0; CNS = 0.</p></td>
    </tr>
    <tr>
      <th>sp_tri</th>
      <td><p>Sp improvement or loss associated with sampling strategy: triplicate (2 out of 3). S. aureus = 0; CNS = 0.10.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A data frame with variables:</p>
<dt>herd</dt><dd><p>Herd id.</p></dd>
<dt>cow</dt><dd><p>Cow id.</p></dd>
<dt>quarter</dt><dd><p>Quarter id.</p></dd>
<dt>S1</dt><dd><p>First milk sample true status.</p></dd>
<dt>S2</dt><dd><p>Second milk sample true status.</p></dd>
<dt>E_h</dt><dd><p>Herd-level exposure.</p></dd>
<dt>E_c</dt><dd><p>Cow-level exposure.</p></dd>
<dt>E_q</dt><dd><p>Quarter-level exposure.</p></dd>
<dt>S1i</dt><dd><p>Misclassified first milk sample.</p></dd>
<dt>S2i</dt><dd><p>Misclassified second milk sample.</p></dd>
<dt>S1_series</dt><dd><p>Misclassified first milk sample based on duplicate series sampling strategy.</p></dd>
<dt>S2_series</dt><dd><p>Misclassified second milk sample based on duplicate series sampling strategy.</p></dd>
<dt>S1_parall</dt><dd><p>Misclassified first milk sample based on duplicate parallel sampling strategy.</p></dd>
<dt>S2_parall</dt><dd><p>Misclassified second milk sample based on duplicate parallel sampling strategy.</p></dd>
<dt>S1_tri</dt><dd><p>Misclassified first milk sample based on triplicate sampling strategy.</p></dd>
<dt>S2_tri</dt><dd><p>Misclassified second milk sample based on triplicate sampling strategy.</p></dd>

    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Dufour, S., Dohoo, I.R., Barkema, H.W., DesCôteaux, L., DeVries, T.J., Reyher, K.K., Roy, J.-P., Scholl, D.T., 2012 <em>Epidemiology of coagulase-negative staphylococci intramammary infection in dairy cattle and the effect of bacteriological culture misclassification</em>. Journal of Dairy Science 95(6):3110-3124.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Initiate a list to store the n data frames</span>
<span class='no'>sim_list</span> <span class='kw'>&lt;-</span> <span class='fu'>vector</span>(<span class='st'>"list"</span>, <span class='fl'>5</span>)
<span class='co'># Do not forget to set seed for replication</span>
<span class='fu'>set.seed</span>(<span class='fl'>123</span>)
<span class='no'>sim_list</span> <span class='kw'>&lt;-</span> <span class='fu'>replicate</span>(<span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>5</span>, <span class='kw'>expr</span> <span class='kw'>=</span> <span class='fu'>make_data</span>(<span class='fl'>100</span>, <span class='fl'>30</span>, <span class='st'>"saureus"</span>), <span class='kw'>simplify</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
<span class='co'># Or with a progress bar</span>
<span class='fu'>require</span>(<span class='no'>pbapply</span>)</div><div class='output co'>#&gt; <span class='message'>Loading required package: pbapply</span></div><div class='input'><span class='no'>sim_list</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/pbapply/topics/pbapply'>pbreplicate</a></span>(<span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>5</span>, <span class='kw'>expr</span> <span class='kw'>=</span> <span class='fu'>make_data</span>(<span class='fl'>100</span>, <span class='fl'>30</span>, <span class='st'>"cns"</span>), <span class='kw'>simplify</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt;    |                                                  | 0 % ~calculating     |++++++++++                                        | 20% ~01s             |++++++++++++++++++++                              | 40% ~01s             |++++++++++++++++++++++++++++++                    | 60% ~01s             |++++++++++++++++++++++++++++++++++++++++         | 80% ~00s             |++++++++++++++++++++++++++++++++++++++++++++++++++| 100% elapsed = 01s</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#references">References</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Denis Haine, Simon Dufour, Henryk Stryhn.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
